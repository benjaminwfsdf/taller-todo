<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registrar Computadora</title>
  <style>
    body {font-family: 'Segoe UI', Tahoma, sans-serif; background:#f2f2f2; margin:0}
    .barra-superior{background:#000;color:#fff;text-align:center;padding:12px;font-weight:700;border-bottom:4px solid #b30000}
    .contenedor{max-width:720px;background:#fff;margin:40px auto;padding:28px;border:2px solid #b30000;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,.1)}
    h1{background:#b30000;color:#fff;padding:14px;text-align:center;border-radius:6px;margin:0 0 20px}
    label{display:block;margin-top:14px;font-weight:600}
    input,textarea{width:100%;padding:12px;border:1px solid #ccc;border-radius:6px;box-sizing:border-box;font-size:16px;text-transform:uppercase}
    textarea{text-transform:uppercase;resize:vertical}
    button{margin-top:18px;background:#b30000;color:#fff;border:none;padding:14px;border-radius:6px;cursor:pointer;font-size:16px}
    button:hover{background:#900}
    .ok{color:green;font-weight:700;margin-top:10px}
    .err{color:#b30000;font-weight:700;margin-top:10px}
    button:hover { background:#900000 }
    .boton-volver { margin-top:20px; display:block; text-align:center; background:#222; color:#fff; padding:12px 16px; border-radius:6px; text-decoration:none; font-size:14px; font-weight:700; border:2px solid #b30000; box-shadow:0 3px 6px rgba(0,0,0,.2) }
    .boton-buscar:hover { background:#b30000 }
    .boton-buscar { margin-top:20px; display:block; text-align:center; background:#900000; color:#fff; padding:12px 16px; border-radius:6px; text-decoration:none; font-size:14px; font-weight:700; border:2px solid #b30000; box-shadow:0 3px 6px rgba(0,0,0,.2) }
    .boton-buscar:hover { background:#b30000 }
  </style>
</head>
<body>
  <div class="barra-superior">WWW.ELSEÑORDELOSESCANER.CL</div>

  <div class="contenedor">
    <h1>Registrar Computadora de Auto</h1>

    <label>Patente del Auto</label>
    <input id="patente" placeholder="ABCD12" />

    <label>¿Qué se le hará a la computadora?</label>
    <textarea id="descripcion" rows="3" placeholder="LIMPIEZA, REPROGRAMACIÓN, CAMBIO DE CHIP..."></textarea>

    <label>Códigos de Avería</label>
    <textarea id="codigos" rows="3" placeholder="P0300, P0171, P0420..."></textarea>

    <label>Número del Dueño (opcional)</label>
    <input id="telefono" placeholder="+56 9 XXXXXXXX" style="text-transform:none" />

    <label>Tipo de Computadora (opcional)</label>
    <input id="tipo" placeholder="ECU, TCM, BCM..." />

    <button onclick="guardarDatos()">Guardar</button>
    <div style="text-align:center;">
      <a href="buscar_computadores.html" class="boton-buscar"> buscar computador</a>
      <a href="index.html" class="boton-volver">← Volver al Menú Principal</a>
       
    </div>
    
    <div id="msg"></div>
  </div>

<script>
  const API_URL = 'https://script.google.com/macros/s/AKfycby8WBaWWAnXmBQNnKcRolzpC9zTYs5E0WTtv4AHrwycRlGboHoNZetBuuT-zxwbLHJMtQ/exec'; // ⬅️ PON AQUÍ TU URL

  async function guardarDatos() {
    const patente      = document.getElementById('patente').value.trim().toUpperCase();
    const descripcion  = document.getElementById('descripcion').value.trim().toUpperCase();
    const codigos      = document.getElementById('codigos').value.trim().toUpperCase();
    const telefono     = document.getElementById('telefono').value.trim();
    const tipo         = document.getElementById('tipo').value.trim().toUpperCase();
    const msg          = document.getElementById('msg');

    if (!patente || !descripcion || !codigos) {
      msg.className = 'err';
      msg.textContent = '⚠️ Completa patente, descripción y códigos.';
      return;
    }

    const payload = new URLSearchParams({
      accion: 'agregarComputador',
      patente, descripcion, codigos, telefono, tipo
    });
   
    // no-cors para evitar CORS (no podremos leer la respuesta, pero se guarda)
    try {
      await fetch(API_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: {'Content-Type':'application/x-www-form-urlencoded;charset=UTF-8'},
        body: payload
      });

      msg.className = 'ok';
      msg.textContent = '✅ Información enviada para guardar.';
      // Limpia formulario
      ['patente','descripcion','codigos','telefono','tipo'].forEach(id => document.getElementById(id).value = '');
    } catch (err) {
      console.error(err);
      msg.className = 'err';
      msg.textContent = '❌ Error al enviar.';
    }
  }
  
</script>
</body>
</html>
