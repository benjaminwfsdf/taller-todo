<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="img/scanner.png">
  <title>Registrar Computadora</title>

 
  

  
  <script>
    const clave = prompt("üîê Ingresa la contrase√±a para acceder:");
    if (clave !== "computador@") {
      alert("‚ùå Contrase√±a incorrecta.");
      window.location.href = "https://www.elsenordelosescaner.cl/";
    }
  </script>
  

  <style>
    :root{
      --bg:#f1f2f4; --ink:#111; --muted:#666;
      --panel:#fff; --border:#e6e6e6;
      --brand:#b30000; --brand-ink:#fff;
      --line:#b30000; --dark:#000;
      --ok:#12a150; --warn:#c97a00; --err:#d43c3c;
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:Segoe UI,system-ui,Arial}
    .top{background:var(--dark);color:#fff;text-align:center;padding:12px;font-weight:800;border-bottom:4px solid var(--line);letter-spacing:.5px}

    .wrap{
      max-width:900px;margin:28px auto;padding:0 16px;
    }

    .card{
      background:var(--panel);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:0 6px 20px rgba(0,0,0,.08);
      overflow:hidden;
    }

    .card__head{
      display:flex; align-items:center; gap:12px;
      padding:18px 22px;
      background:linear-gradient(180deg, #d01515, var(--brand));
      color:var(--brand-ink);
      border-bottom:4px solid #7e0000;
    }
    .card__head h1{
      margin:0; font-size:24px; line-height:1.2; font-weight:800; letter-spacing:.3px;
      flex:1;
    }
    .card__head .actions{display:flex; gap:10px}
    .btn{
      border:2px solid var(--brand);
      background:#000; color:#fff; font-weight:800;
      padding:10px 14px; border-radius:10px; cursor:pointer;
      transition:.2s transform, .2s background;
    }
    .btn--light{
      background:#111; border-color:#ffaaaa;
    }
    .btn:hover{background:var(--brand); transform:translateY(-1px)}
    .btn:disabled{opacity:.6; cursor:not-allowed; transform:none}

    .card__body{padding:22px}

    .grid{
      display:grid; gap:16px;
      grid-template-columns: 1fr;
    }
    @media (min-width:820px){
      .grid--2{grid-template-columns: 1fr 1fr}
    }

    label{font-weight:700; font-size:14px; color:#222; display:block; margin-bottom:6px}
    .hint{color:var(--muted); font-size:12px; margin-top:4px}

    input[type="text"], textarea{
      width:100%; padding:12px 12px;
      border:1px solid #d7d7d7; border-radius:10px; background:#fff;
      font-size:16px; outline:none;
      transition:border-color .15s ease;
      text-transform:uppercase;
    }
    input[type="text"]:focus, textarea:focus{
      border-color:#b30000; box-shadow:0 0 0 3px #ff000022;
    }
    textarea{resize:vertical; min-height:100px}

    .actions-bar{
      margin-top:18px; display:flex; gap:12px; justify-content:flex-end; flex-wrap:wrap;
      border-top:1px dashed #eee; padding-top:16px;
    }

    .msg{
      margin-top:10px; font-weight:700; text-align:center;
      padding:10px 12px; border-radius:10px; display:none;
    }
    .msg--ok{display:block; background:#e9fbef; color:#0b7a42; border:1px solid #bfe8cf}
    .msg--err{display:block; background:#ffecee; color:#9b1d1d; border:1px solid #f2c3c3}

    .back{
      display:block; width:fit-content; margin:26px auto 10px;
      padding:10px 16px; background:#222; color:#fff; border:2px solid var(--brand);
      border-radius:8px; font-weight:700; text-decoration:none; transition:.2s background;
    }
    .back:hover{background:var(--brand)}

    footer{margin:30px 0 50px; text-align:center; font-size:12px; color:#555; font-weight:700}
  </style>
</head>
<body>
  <div class="top">WWW.ELSE√ëORDELOSESCANER.CL</div>

  <div class="wrap">
    <div class="card">
      <div class="card__head">
        <h1>Registrar Computadora de Auto</h1>
        <div class="actions">
          <a class="btn btn--light" href="buscar.html">üîé Buscar computador</a>
        </div>
      </div>

      <div class="card__body">
        <div class="grid grid--2">
          <div>
            <label for="patente">Patente del Auto</label>
            <input type="text" id="patente" placeholder="ABCD12" maxlength="8">
            <div class="hint">Se guarda en may√∫sculas.</div>
          </div>

          <div>
            <label for="telefono">Tel√©fono del Due√±o (opcional)</label>
            <input type="text" id="telefono" placeholder="+56 9 XXXXXXXX">
            <div class="hint">Solo para contacto interno.</div>
          </div>

          <div>
            <label for="tipo_computadora">Tipo de Computadora (opcional)</label>
            <input type="text" id="tipo_computadora" placeholder="ECU, TCM, BCM‚Ä¶">
          </div>
        </div>

        <div class="grid" style="margin-top:16px">
          <div>
            <label for="descripcion">¬øQu√© se le har√° a la computadora?</label>
            <textarea id="descripcion" rows="4" placeholder="LIMPIEZA, REPROGRAMACI√ìN, CAMBIO DE CHIP‚Ä¶"></textarea>
          </div>

          <div>
            <label for="codigos">C√≥digos de Aver√≠a</label>
            <textarea id="codigos" rows="4" placeholder="P0300, P0171, P0420‚Ä¶"></textarea>
            <div class="hint">Separa con coma o salto de l√≠nea.</div>
          </div>
        </div>

        <div class="actions-bar">
          <button id="btnGuardar" class="btn" onclick="guardarDatos()">Guardar</button>
          <button class="btn btn--light" type="button" onclick="limpiar()">Limpiar</button>
        </div>

        <div id="mensaje" class="msg"></div>
      </div>
    </div>

    <a href="../index.html" class="back">‚Üê Volver al Panel Principal</a>
    <footer>¬© 2025 <strong>Benjamin Gonz√°lez</strong>. Todos los derechos reservados.</footer>
  </div>

<script>
  // üîß Cambia esta URL por tu Apps Script de ‚Äúcomputadoras‚Äù
  const API_URL = "https://script.google.com/macros/s/AKfycbzw_DufhrDoR11ZwFIMN7AgyeRHmrffhmx4NdG9DU6ECFfvQ0voDI_9LBrM03g3Ohc31Q/exec";

  // UX: auto-may√∫sculas mientras escribes
  ['patente','descripcion','codigos','tipo_computadora'].forEach(id=>{
    const el = document.getElementById(id);
    el.addEventListener('input', ()=> el.value = el.value.toUpperCase());
  });

  function showMsg(text, ok=true){
    const m = document.getElementById('mensaje');
    m.className = 'msg ' + (ok ? 'msg--ok' : 'msg--err');
    m.textContent = text;
  }

  function limpiar(){
    ['patente','descripcion','codigos','telefono','tipo_computadora'].forEach(id=>{
      const el = document.getElementById(id); el.value = '';
    });
    const m = document.getElementById('mensaje'); m.className='msg'; m.textContent='';
  }

  async function guardarDatos() {
    const btn = document.getElementById('btnGuardar');
    const patente = document.getElementById("patente").value.trim().toUpperCase();
    const descripcion = document.getElementById("descripcion").value.trim().toUpperCase();
    const codigos = document.getElementById("codigos").value.trim().toUpperCase();
    const telefono = document.getElementById("telefono").value.trim();
    const tipo_computadora = document.getElementById("tipo_computadora").value.trim().toUpperCase();

    if (!patente || !descripcion || !codigos) {
      showMsg("‚ö†Ô∏è Completa Patente, Descripci√≥n y C√≥digos.", false);
      return;
    }

    try{
      btn.disabled = true; showMsg("Guardando‚Ä¶");
      // Para evitar CORS preflight: form-urlencoded
      const body = new URLSearchParams({
        patente, descripcion, codigos, telefono, tipo_computadora
      });

      await fetch(API_URL, {
        method: "POST",
        body
      });

      showMsg("‚úÖ Informaci√≥n guardada con √©xito.");
      limpiar();
    }catch(e){
      console.error(e);
      showMsg("‚ùå Error al guardar. Reintenta.", false);
    }finally{
      btn.disabled = false;
    }
  }
</script>
</body>
</html>
